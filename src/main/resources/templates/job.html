<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Fulfillment Platform</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style type="text/css">
        .cronbox{
            height:100px;
            width:120px;
        }
    </style>
</head>
    <body>
        <h1>Fulfillment Platform</h1>
        <hr />
        <a href="../">Home</a>
        <a href="../inventoryUpdater">Inventory Updater</a>
        <a href="../runHistory">Run History</a>
        <a href="../manageSuppliers">Manager Suppliers</a>
        <a href="../job">Job Manager</a>
        <hr />
        <font size='1'>Select more than one values by holding the ctrl or shift</font><br /><br />
        <table>
            <tr>
                <td><b>Minute</b></td>
                <td><b>Hour</b></td>
                <td><b>Day</b></td>
                <td><b>Month</b></td>
                <td><b>Weekday</b></td>
            </tr>
            <tr>
                <td>
                    <select onChange="show_value()" name="minute" id="minute" multiple="multiple" class="cronbox">
                        <option value="*">*</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                        <option value="32">32</option>
                        <option value="33">33</option>
                        <option value="34">34</option>
                        <option value="35">35</option>
                        <option value="36">36</option>
                        <option value="37">37</option>
                        <option value="38">38</option>
                        <option value="39">39</option>
                        <option value="40">40</option>
                        <option value="41">41</option>
                        <option value="42">42</option>
                        <option value="43">43</option>
                        <option value="44">44</option>
                        <option value="45">45</option>
                        <option value="46">46</option>
                        <option value="47">47</option>
                        <option value="48">48</option>
                        <option value="49">49</option>
                        <option value="50">50</option>
                        <option value="51">51</option>
                        <option value="52">52</option>
                        <option value="53">53</option>
                        <option value="54">54</option>
                        <option value="55">55</option>
                        <option value="56">56</option>
                        <option value="57">57</option>
                        <option value="58">58</option>
                        <option value="59">59</option>
                    </select>
                </td>
                <td>
                    <select onChange="show_value()" name="hour" id="hour" multiple="multiple" class="cronbox">
                        <option value="*">*</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                    </select>
                </td>
                <td>
                    <select onChange="show_value()" name="day" id="day" multiple="multiple" class="cronbox">
                        <option value="*">*</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                </td>
                <td>
                    <select name="month" id="month" multiple="multiple" class="cronbox">
                        <option value="*">*</option>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">Augest</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </td>
                <td>
                    <select onChange="show_value()" name="weekday" id="weekday" multiple="multiple" class="cronbox">
                        <option value="*">*</option>
                        <option value="1">Monday</option>
                        <option value="2">Tuesday</option>
                        <option value="3">Wednesday</option>
                        <option value="4">Thursday</option>
                        <option value="5">Friday</option>
                        <option value="6">Saturday</option>
                        <option value="0">Sunday</option>
                    </select>
                </td>
            </tr>
        </table>

        <form action="#" th:action="@{/job/add}" th:object="${job}" method="post">
            Supplier id to run: <input type="text" th:field="*{supplierId}"/><br />
            Date to Start Job: <input type="datetime-local" th:field="*{startDateTime}"/><br />
            Run once? <input type="checkbox" th:field="*{runOnce}"/><br />
            <input type="hidden" th:field="*{cronExpression}"/><br />
            <p><input type="submit" value="Submit"/></p>
        </form>

        <button onClick="show_value()">Test</button>
    </body>
</html>

<script>
	function getObj(objID)
	{
		if (document.getElementById) {return document.getElementById(objID);}
		else if (document.all) {return document.all[objID];}
		else if (document.layers) {return document.layers[objID];}
	}


	function show_value() {
			var minute, hour, day, month, weekday;

			minute	= getSelection('minute');
			hour	= getSelection('hour');
			day		= getSelection('day');
			month	= getSelection('month');
			weekday	= getSelection('weekday');

			var cronPattern =  minute + "\t" + hour + "\t" + day + "\t" + month + "\t" + weekday;
			//alert(cronPattern)
		    document.getElementById("cronExpression").value = cronPattern;

			return cronPattern;
	}

	function getSelection(name) {
		var chosen;
			var all_selected = [];
			var a=getObj(name);
			for ( var index=a.options.length -1 ; index >= 0; --index) {
				//console.log(a.options.length);

				if(a[index].selected) {
					if( a[index].value == '*' ) {
						chosen = '*';
						return chosen;
					}
					all_selected.push(a[index].value);
				}
			}

			if(all_selected.length)
				chosen = all_selected.join(",");
			else
				chosen = '*';
		return chosen;
	}
</script>